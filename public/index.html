<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <link rel="icon" href="<%= BASE_URL %>favicon.ico">
    <!-- Import for the fontawesome icons -->
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/all.css">
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.15.1/css/v4-shims.css">
    <link rel="preconnect" href="https://fonts.gstatic.com">
    <link href="https://fonts.googleapis.com/css2?family=Source+Sans+Pro:wght@400;600&display=swap" rel="stylesheet">
    <script lang="JavaScript"> 
      window.onload=function(){
        var tag = document.createElement("script");
        tag.src = "./js/brython.min.js";
        document.getElementsByTagName("head")[0].appendChild(tag);
        var tag2 = document.createElement("script");
        tag2.src = "./js/brython_stdlib.js";
        document.getElementsByTagName("head")[0].appendChild(tag2);
      }
    </script>
    <title><%= htmlWebpackPlugin.options.title %></title>
  </head>
  <body>
    <noscript>
      <strong>We're sorry but <%= htmlWebpackPlugin.options.title %> doesn't work properly without JavaScript enabled. Please enable it to continue.</strong>
    </noscript>
    <div onclick="brython()" id="brythonContainer"></div>  
      <script type="text/python3">
from browser import document, window
import sys as __sys
import __MBConfig
import __osMB 
import __timeMB
__sys.modules["os"] = __osMB
__sys.modules["time"] = __timeMB
#before doing AC, set the global property for __MBConfig._isMBV2 to be used in potential microbit imported modules
__MBConfig._isMBV2_ = document.getElementById("toggle_mbv2_checkbox").checked
__microbitModules = ["audio", "machine", "microbit", "micropython", "music", "neopixel", "radio", "random", "speech", "utime"]
__modulesToDelete = []
for module in __sys.modules:
  if str(module) in __microbitModules:
    __modulesToDelete.append(str(module))
for module in __modulesToDelete:
    del __sys.modules[module]
__modulesToDelete=[]
#AC part
exec(document['userCode'].text)
      </script>
    </div>
    <input type="checkbox" id="toggle_mbv2_checkbox" checked="checked">isV2</input>
    <div id="app"></div>
    <!-- built files will be auto injected -->
  </body>
</html>